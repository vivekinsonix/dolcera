{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["// middleware.ts (or src/middleware.ts)\r\nimport { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nexport function middleware(request: NextRequest) {\r\n    const response = NextResponse.next();\r\n\r\n    // Replace with your exact production URLs (include https://)\r\n    const strapiUrl = process.env.NEXT_PUBLIC_API_URL || 'https://your-strapi-app.onrender.com'; // e.g., https://my-strapi.onrender.com\r\n    const frontendUrl = process.env.CLIENT_URL || 'https://your-nextjs.vercel.app'; // your Vercel site\r\n\r\n    // Build CSP: allow self + Strapi domain\r\n    const csp = [\r\n        \"frame-ancestors 'self'\",\r\n        strapiUrl,\r\n        new URL(strapiUrl).origin, // ensures full origin\r\n        frontendUrl // optional, for self-embedding if needed\r\n    ].join(' ');\r\n\r\n    response.headers.set('Content-Security-Policy', csp);\r\n\r\n    // Fallback for older browsers (optional but recommended)\r\n    response.headers.set('X-Frame-Options', `ALLOW-FROM ${strapiUrl}`);\r\n\r\n    return response;\r\n}\r\n\r\nexport const config = {\r\n    matcher: '/((?!_next/static|_next/image|favicon.ico|api).*)', // Apply to all content pages (skip static/assets/api)\r\n};"],"names":[],"mappings":"AAAA,uCAAuC;;;;;;;AACvC;AAAA;;AAGO,SAAS,WAAW,OAAoB;IAC3C,MAAM,WAAW,gMAAY,CAAC,IAAI;IAElC,6DAA6D;IAC7D,MAAM,YAAY,kFAAmC,wCAAwC,uCAAuC;IACpI,MAAM,cAAc,QAAQ,GAAG,CAAC,UAAU,IAAI,kCAAkC,mBAAmB;IAEnG,wCAAwC;IACxC,MAAM,MAAM;QACR;QACA;QACA,IAAI,IAAI,WAAW,MAAM;QACzB,YAAY,yCAAyC;KACxD,CAAC,IAAI,CAAC;IAEP,SAAS,OAAO,CAAC,GAAG,CAAC,2BAA2B;IAEhD,yDAAyD;IACzD,SAAS,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,WAAW,EAAE,WAAW;IAEjE,OAAO;AACX;AAEO,MAAM,SAAS;IAClB,SAAS;AACb"}}]
}